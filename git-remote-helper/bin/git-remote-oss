#!/bin/sh
set -eu
remote_name=$1
url=${2#oss://}

err() { printf "%s\n" "$*" 1>&2; }

usage() {
    err "Usage: $(basename "$0") <remote-name> <url>"
    err
    err "This is only meant to be invoked by git and not anyone else directly."
    err
    err "remote-name is the name (e.g. origin) given to the remote."
    err
    err "url is of the form oss://<URL>"
}

if [ $# != 2 ]; then
    usage
    exit 1
fi

export PATH=$PATH:/usr/lib/git-core
exec git-remote-https $remote_name $url
